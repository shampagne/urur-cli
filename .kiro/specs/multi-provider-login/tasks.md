# Implementation Plan

- [x] 1. ページコピーとエラーメッセージの刷新
- [x] 1.1 ページ見出しと説明文を変更する
  - h1 の見出しテキストを「個人開発を世界へ」に変更する
  - 見出し下の説明文を「アカウントを作成して、サービスを投稿しましょう」に変更する
  - 従来の「ログイン」見出しが表示されないことを確認する
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 1.2 エラーメッセージを全プロバイダ共通の文言に更新する
  - `access_denied` のメッセージを「認証がキャンセルされました」に変更し、GitHub 固有の表現を削除する
  - 不明なエラーコードのデコード表示とフォールバック（`default`）が機能することを確認する
  - エラー表示領域に補足メッセージ「問題が続く場合は、時間をおいて再度お試しください」を表示する
  - _Requirements: 6.1, 6.2, 6.3_

- [x] 2. OAuth ボタンの追加とスタイリング
- [x] 2.1 GitHub ボタンのテキストとスタイルを更新する
  - ボタンテキストを「GitHub で続ける」に変更する
  - 黒背景（`#0a0a0a`）+ 白文字のスタイルを維持する
  - GitHub アイコン SVG を表示する
  - _Requirements: 2.1, 5.1_

- [x] 2.2 Google ボタンを追加する
  - 「Google で続ける」ボタンを GitHub ボタンの直後に配置する
  - 白背景 + ボーダー（`#e4e4e7`）+ 黒文字のスタイルを適用する
  - Google カラーロゴ SVG（4色）を表示する
  - GitHub → Google のボタン順序を確認する
  - _Requirements: 3.1, 5.2, 5.5_

- [x] 2.3 「または」の区切り線を追加する
  - OAuth ボタン群とメールボタンの間に水平線 + 「または」テキストのセパレータを配置する
  - _Requirements: 5.4_

- [x] 3. Email Magic Link 機能の実装
- [x] 3.1 メールボタンとトグルフォームの UI を追加する
  - 「メールアドレスで続ける」ボタンを区切り線の下に配置する
  - 白背景 + ボーダー + メールアイコン SVG のスタイルを適用する
  - ボタンクリックでメールアドレス入力欄と「ログインリンクを送信」ボタンをトグル表示する
  - 再クリックでフォームを非表示にする
  - _Requirements: 4.1, 4.2, 5.3_

- [x] 3.2 Magic Link 送信ロジックを実装する
  - メールアドレスが空の場合に「メールアドレスを入力してください」のバリデーションエラーを表示する
  - 入力されたメールアドレスで Supabase の `signInWithOtp` を実行する
  - `emailRedirectTo` に `origin + '/auth/callback'` を指定する
  - 送信成功時に「○○ にログインリンクを送信しました。メールを確認してください。」を表示する
  - 送信失敗時にエラーメッセージを表示し、送信ボタンを再有効化する
  - _Requirements: 4.3, 4.4, 4.5, 4.6_

- [x] 4. OAuth 認証ロジックの共通化
- [x] 4.1 共通 OAuth ハンドラを実装する
  - `handleOAuth(provider)` 関数を定義し、provider 名を引数で GitHub/Google を共通処理する
  - ボタンのローディング状態管理（無効化 + スピナー表示）を `setButtonLoading` 関数で共通化する
  - `signInWithOAuth` を実行し、`redirectTo` に `/auth/callback` を指定する
  - エラー時にボタンを復帰させ、inline メッセージでエラーを表示する
  - GitHub ボタンと Google ボタンにイベントリスナーを登録する
  - _Requirements: 2.2, 2.3, 2.4, 3.2, 3.3, 3.4_

- [x] 5. 認証コールバックの互換性確認
- [x] 5.1 既存コールバックが全プロバイダに対応していることを確認する
  - `auth/callback.tsx` の `exchangeCodeForSession` が GitHub/Google/Email Magic Link の code パラメータを処理できることを確認する
  - 認証成功後にダッシュボードにリダイレクトされることを確認する
  - 変更が不要であることを検証し、コードに変更を加えない
  - _Requirements: 7.1, 7.2, 7.3, 7.4_

- [ ] 6. 手動 E2E テスト
- [ ]* 6.1 全プロバイダの認証フローを手動テストする
  - GitHub ボタンクリック → GitHub 認証画面 → ダッシュボードリダイレクト
  - Google ボタンクリック → Google 認証画面 → ダッシュボードリダイレクト
  - メール入力 → Magic Link 送信 → メール受信 → リンククリック → ダッシュボード
  - 認証キャンセル時のエラーメッセージ表示
  - ボタン順序・スタイル・区切り線の視覚確認
  - _Requirements: 1.1, 1.2, 2.1, 2.2, 3.1, 3.2, 4.1, 4.3, 4.4, 5.1, 5.2, 5.3, 5.4, 5.5, 6.1, 7.1, 7.2, 7.3, 7.4_
