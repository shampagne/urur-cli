# Implementation Plan

- [x] 1. テスト可能なCLIプログラムファクトリの作成とグローバルヘルプ検証
  - プログラム生成をファクトリ関数として切り出し、テストから直接インポートできるようにする
  - エントリーポイントはファクトリ関数を呼び出して`parse()`するだけの薄いラッパーに変更する
  - テストヘルパー（`configureOutput()` + `exitOverride()` でヘルプ出力キャプチャ）を作成する
  - グローバルヘルプに全4コマンド（login, logout, submit, whoami）が一覧表示されることをテストで検証する
  - `--version` でバージョン情報が表示されることを確認する
  - _Requirements: 1.1, 1.2, 1.3, 1.4, 6.2, 6.3_

- [x] 2. 各コマンドのヘルプ定義とテスト
- [x] 2.1 loginコマンドのヘルプ定義とテスト
  - `--port`オプション（デフォルト値8976）を定義する
  - 使用例（`urur login`, `urur login --port 3000`）をヘルプテキストに追加する
  - 認証フローの概要（ブラウザが開く → GitHubで認証 → トークン保存）を説明文に含める
  - コマンドハンドラの引数型にportオプションを追加する
  - ヘルプ出力に`--port`と使用例が含まれることをテストで検証する
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 6.1_

- [x] 2.2 submitコマンドのヘルプ定義とテスト
  - 全オプション（`--name`, `--url`, `--tagline`, `--description`, `--logo-url`, `-i/--interactive`）を定義する
  - 使用例（対話モード `urur submit -i`、ワンライナー）をヘルプテキストに追加する
  - オプション未指定時は対話モードにフォールバックする旨を記載する
  - コマンドハンドラの引数型に全オプションを追加する
  - ヘルプ出力に全オプション名が含まれることをテストで検証する
  - _Requirements: 3.1, 3.2, 3.3, 3.4, 6.1_

- [x] 2.3 whoamiコマンドのヘルプ定義とテスト
  - 表示される情報の例（GitHubユーザー名、メールアドレス）をヘルプテキストに含める
  - 未ログイン時は「urur login」を実行するよう案内する説明を追加する
  - ヘルプ出力にGitHubユーザー名の記載があることをテストで検証する
  - _Requirements: 4.1, 4.2, 4.3, 4.4, 6.1_

- [x] 2.4 logoutコマンドのヘルプ定義とテスト
  - `~/.urur/credentials.json` が削除される旨をヘルプテキストに含める
  - ヘルプ出力に`credentials.json`の記載があることをテストで検証する
  - _Requirements: 5.1, 5.2, 5.3, 6.1_
